
Consulta ejecutada: 2025-07-25 22:27:57
Número de registros: 30

Consulta ejecutada: 2025-07-28 22:24:18
Número de registros: 30

Consulta ejecutada: 2025-07-28 22:38:42
Número de registros: 31

Consulta ejecutada: 2025-07-28 22:40:51
Número de registros: 31

Consulta ejecutada: 2025-07-28 22:42:13
Número de registros: 31

Consulta ejecutada: 2025-07-28 22:50:12
Número de registros: 31

Consulta ejecutada: 2025-07-28 23:07:58
Número de registros: 31

Consulta ejecutada: 2025-07-28 23:09:10
Número de registros: 31

Consulta ejecutada: 2025-07-28 23:10:37
Número de registros: 32

Consulta ejecutada: 2025-07-28 23:20:27
Número de registros: 32

Consulta ejecutada: 2025-07-28 23:25:03
Número de registros: 32

Consulta ejecutada: 2025-07-29 18:29:40
Número de registros: 32

Consulta ejecutada: 2025-07-29 18:37:20
Número de registros: 32

Consulta ejecutada: 2025-07-29 18:41:50
Número de registros: 32

Consulta ejecutada: 2025-07-29 18:59:12
Número de registros: 32

Consulta ejecutada: 2025-07-29 19:00:41
Número de registros: 33

Consulta ejecutada: 2025-07-29 20:04:20
Número de registros: 33

Consulta ejecutada: 2025-07-29 20:17:40
Número de registros: 33

Consulta ejecutada: 2025-07-29 20:22:11
Número de registros: 33

Consulta ejecutada: 2025-07-29 20:26:05
Número de registros: 33

Consulta ejecutada: 2025-07-29 20:32:36
Número de registros: 33

Consulta ejecutada: 2025-07-29 21:22:35
Número de registros: 33

Consulta ejecutada: 2025-07-29 21:27:02
Número de registros: 33

Consulta ejecutada: 2025-07-29 21:42:02
Número de registros: 33

Consulta ejecutada: 2025-07-29 21:48:37
Número de registros: 33

Consulta ejecutada: 2025-07-29 21:50:30
Número de registros: 33
Array
(
    [fecha] => 2025-07-29 21:55:00
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-29 21:55:30
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-29 21:58:47
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-29 21:58:47
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-29 22:03:40
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 17:51:12
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 17:53:11
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 17:55:17
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 17:58:42
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    IFNULL(cp.extension, '') AS extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(h.fecha_cambio, '%d/%m/%Y'), ': ',
                IFNULL(h.departamento_anterior, 'N/A'), ' → ', h.departamento_nuevo
            )
            ORDER BY h.fecha_cambio DESC 
            SEPARATOR ' | '
        ) 
        FROM historial_departamentos h 
        WHERE h.email_institucional = cp.email_institucional
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON (
    TRIM(cp.numero_empleado) = TRIM(d.numero_empleado) OR 
    cp.email_institucional = d.email_institucional
)
GROUP BY cp.id
ORDER BY cp.nombre
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 19:23:46
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 19:25:02
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 19:26:34
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 20:30:44
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 20:33:05
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 20:37:33
    [registros] => 33
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 21:18:05
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 22:14:09
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 22:15:21
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 22:26:05
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 22:29:48
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 22:31:37
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 22:31:46
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 23:10:13
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-07-31 23:12:38
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 18:27:18
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 18:37:06
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 18:38:52
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 18:46:25
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 19:19:00
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 20:16:29
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 20:34:56
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 20:40:02
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 21:01:20
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 21:33:39
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 22:11:14
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-01 22:20:28
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 19:21:12
    [registros] => 34
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 19:57:41
    [registros] => 0
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 20:35:36
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:04:04
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:14:18
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:17:39
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:37:06
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:37:41
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:37:45
    [registros] => 1
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-04 21:48:52
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:12:51
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:13:05
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:38:11
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:38:13
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:41:58
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:42:12
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:43:51
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:48:32
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:48:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:48:54
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:50:08
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 20:50:37
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:18:07
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:20:51
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:21:07
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:21:27
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:21:35
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:21:55
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:23:29
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(d.id) AS total_documentos,
    GROUP_CONCAT(
        CONCAT(
            DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
            ': ', 
            IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
            ' → ', 
            hd.departamento_nuevo
        ) 
        ORDER BY hd.fecha_cambio DESC 
        SEPARATOR ' | '
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
LEFT JOIN historial_departamentos hd ON cp.id = hd.personal_id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:37:00
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:38:58
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:44:14
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:44:24
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:46:00
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:46:01
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:42
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:42
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:43
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:43
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:43
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:43
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:43
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:44
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 22:47:45
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    COUNT(DISTINCT d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
LEFT JOIN documentos d ON TRIM(cp.email_institucional) = TRIM(d.email_institucional)
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, cp.departamento_jud, cp.telefono, cp.extension
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:02:51
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:02:52
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:02:52
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:03:48
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:05:17
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:10:32
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:17:23
    [registros] => 2
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:18:22
    [registros] => 3
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:20:05
    [registros] => 3
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:21:28
    [registros] => 3
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:22:34
    [registros] => 3
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:24:04
    [registros] => 3
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:34:49
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:37:16
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    (SELECT COUNT(*) FROM documentos d WHERE d.personal_id = cp.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            ) 
            ORDER BY hd.fecha_cambio DESC 
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
    ) AS historial_deptos
FROM catalogo_personal cp
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:53:56
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-05 23:55:12
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-06 21:52:21
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-06 21:54:15
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-06 21:54:58
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-06 22:12:24
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 19:32:44
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 20:12:19
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 20:12:30
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 20:52:46
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 20:53:47
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 21:06:00
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 21:06:04
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 21:06:50
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 21:08:00
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:04:17
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:04:40
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:04:41
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:04:41
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:19
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:19
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:35
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:36
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:36
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:49
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:50
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:50
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:50
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:50
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:50
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:05:51
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:06
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:06
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:08
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:08
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:08
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:08
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:08
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:09
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:17
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:17
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-07 23:06:17
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-14 18:00:08
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-14 21:23:07
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-14 21:35:14
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-14 21:36:01
    [registros] => 4
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-15 18:33:49
    [registros] => 5
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
Array
(
    [fecha] => 2025-08-15 18:33:51
    [registros] => 5
    [consulta] => SELECT 
    cp.id,
    cp.email_institucional,
    cp.nombre,
    cp.puesto,
    cp.departamento_jud AS departamento_actual,
    cp.telefono,
    cp.extension,
    cp.numero_empleado,
    COUNT(d.id) AS total_documentos,
    (
        SELECT GROUP_CONCAT(
            DISTINCT CONCAT(
                DATE_FORMAT(hd.fecha_cambio, '%d/%m/%Y'), 
                ': ', 
                IFNULL(hd.departamento_anterior, 'Nuevo ingreso'), 
                ' → ', 
                hd.departamento_nuevo
            )
            ORDER BY hd.fecha_cambio DESC
            SEPARATOR ' | '
        )
        FROM historial_departamentos hd
        WHERE hd.personal_id = cp.id
        GROUP BY hd.personal_id
    ) AS historial_deptos,
    MAX(d.fecha_creacion) AS ultimo_documento
FROM catalogo_personal cp
LEFT JOIN documentos d ON d.personal_id = cp.id
GROUP BY cp.id, cp.email_institucional, cp.nombre, cp.puesto, 
         cp.departamento_jud, cp.telefono, cp.extension, cp.numero_empleado
ORDER BY cp.nombre ASC
    [error] => 
)
